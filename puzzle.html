<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Heart Puzzle ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
}

h2 {
    margin-bottom: 15px;
}

#puzzle {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    width: 300px;
    height: 300px;
}

.tile {
    background-image: url("puzzle.jpg");
    background-size: 300px 300px;
    cursor: pointer;
}

#win {
    display: none;
    margin-top: 30px;
    font-size: 24px;
    color: #ffb6c1;
    text-align: center;
}
</style>
</head>

<body>

<h2>üß© Complete the puzzle</h2>

<div id="puzzle"></div>

<div id="win">
    üéâ Yayyy ü•∞<br>
    You win my heart üíñ
</div>

<script>
const puzzle = document.getElementById("puzzle");
const size = 3;
let tiles = [];

function createPuzzle() {
    tiles = [];
    puzzle.innerHTML = "";

    for (let i = 0; i < size * size; i++) {
        tiles.push(i);
    }

    tiles.sort(() => Math.random() - 0.5);

    tiles.forEach((num, index) => {
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.style.backgroundPosition =
            `${-(num % size) * 100}px ${-Math.floor(num / size) * 100}px`;

        tile.onclick = () => swap(index);
        puzzle.appendChild(tile);
    });
}

function swap(index) {
    const empty = tiles.indexOf(size * size - 1);
    const valid =
        Math.abs(empty - index) === 1 ||
        Math.abs(empty - index) === size;

    if (!valid) return;

    [tiles[empty], tiles[index]] = [tiles[index], tiles[empty]];
    updateTiles();
    checkWin();
}

function updateTiles() {
    [...puzzle.children].forEach((tile, i) => {
        const num = tiles[i];
        tile.style.backgroundPosition =
            `${-(num % size) * 100}px ${-Math.floor(num / size) * 100}px`;
    });
}

function checkWin() {
    if (tiles.every((v, i) => v === i)) {
        document.getElementById("win").style.display = "block";
    }
}

createPuzzle();
</script>

</body>
</html>
